<Window x:Class="AllForLife.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AllForLife"
        mc:Ignorable="d"
        Title="Каталог товаров" Height="800" Width="1000"
        FontFamily="Comic Sans MS"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Icon="/Resources/picture.png">

    <Window.Resources>
        <local:SaleConverter x:Key="SaleConv"/>
    </Window.Resources>
    
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="50"/>
            <RowDefinition/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <Grid Background="#76e383">
            <StackPanel x:Name="userPanel"
                        HorizontalAlignment="Right">

                <TextBlock x:Name="usernameTB"
                           FontWeight="Bold"
                           Margin="5"/>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <StackPanel Orientation="Horizontal"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center">
                <TextBlock Text="Диапазон скидки"
                           FontSize="20"
                           Margin="10"/>

                <ComboBox x:Name="SaleCB"
                          Margin="10"
                          Width="150"
                          SelectionChanged="SaleCB_SelectionChanged"/>

            </StackPanel>

        </Grid>

        <ListBox x:Name="productsLB"
                 Grid.Row="2"
                 BorderBrush="Black"
                 BorderThickness="1"
                 Margin="5"
                 HorizontalAlignment="Stretch"
                 ScrollViewer.HorizontalScrollBarVisibility ="Hidden"
                 ScrollViewer.VerticalScrollBarVisibility="Hidden">
            <ListBox.ItemTemplate>
                <DataTemplate>

                    <Border 
                        Style="{StaticResource LBborderStyle}">
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="160"/>
                                <ColumnDefinition Width="680"/>
                                <ColumnDefinition Width="100"/>
                            </Grid.ColumnDefinitions>

                            <Border
                                Style="{StaticResource LBborderStyle}">

                                <Image Source="{Binding ImageURL}"
                                       MaxWidth="150"
                                       MaxHeight="150"
                                       Margin="3"/>
                            </Border>

                            <Border Grid.Column="1"
                                Style="{StaticResource LBborderStyle}">

                                <StackPanel Margin="10">
                                    <TextBlock x:Name="prodNameTB"
                                               Text="{Binding Name}"
                                               Style="{StaticResource ProdLstStyle}"
                                               FontWeight="Bold"/>

                                    <TextBlock x:Name="categoryTB"
                                               Text="{Binding Category, StringFormat='Категория товара: {0}'}"
                                               Style="{StaticResource ProdLstStyle}"/>



                                    <TextBlock x:Name="DescTB"
                                               Text="{Binding Description, StringFormat='Описание товара: {0}'}"
                                               Style="{StaticResource ProdLstStyle}"/>

                                    <TextBlock x:Name="PriceTB"
                                               Text="{Binding Price, StringFormat='Стоимость: {0} руб.'}"
                                               Style="{StaticResource ProdLstStyle}"/>

                                </StackPanel>
                            </Border>

                            <Border Grid.Column="2"
                                    Style="{StaticResource LBborderStyle}">

                                <TextBlock x:Name="saleTB"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Margin="10"
                                           FontSize="20"
                                          Text="{Binding CurrentSale, StringFormat=' {0} %'}"
                                           Foreground="{Binding CurrentSale, Converter={StaticResource SaleConv}}"/>

                            </Border>
                        </Grid>

                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
            
            
        </ListBox>
        
    </Grid>
</Window>
